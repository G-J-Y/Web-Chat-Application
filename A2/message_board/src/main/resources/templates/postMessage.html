<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Post Message</title>
</head>
<body>
<div id="Layer1">
    <center>
        <form action="" th:action="@{/post}" method="post" enctype="multipart/form-data">
            <table align="center">
                <tr>
                    <td style=" font-weight:bold; width:10%" >Title：</td>
                    <td width="90%" ><input id="title1" name="title" /></td>
                </tr>

                <tr>
                    <td style="font-weight:bold; width:10%" > Content：</td>
                    <td >  <textarea id="textarea" cols="60" rows="10"  name="content"></textarea> </td>
                </tr>

                <tr>
                    <center>
                        <td style="font-weight:bold; width:10%" >Attachment：</td>
                        <!--<td width="90%" ><input id="attachment" name="attachment" /></td>-->
                        <td>
                            <input type="file" name="file">
                            <!--<div th:if="${uploadMessage}">
                                <p th:text="${uploadMessage}"/>
                            </div>-->
                        </td>
                    </center>
                </tr>

                <tr >
                    <td colspan="2">
                        <center>
                            <input type="submit" name="post" value="Post" />
                        </center>
                    </td>
                </tr>
            </table>
        </form>
        <form action="" th:action="@{/allPosts}" method="GET" >
            <input type="submit" name="viewPost" value="View Posts"/>
        </form>
    </center>
</div>

<div id="content" style="text-align: center">
    <h2>Post History</h2>
    <table width="100%" id="table" th:each="post : ${posts}">
        <tr id="message" >
            <td>Title</td>
            <td id="title" th:text="${post.getTitle()}"></td>
        </tr>
        <tr>
            <td>Content</td>
            <td id="text" style="width:21%; font-weight:normal;" th:text="${post.getContent()}"></td>
        </tr>
        <tr>
            <td>Date</td>
            <td id="date" th:text="${post.getPostDate()}"></td>
        </tr>
        <tr>
            <td>Attachment</td>
            <td>
                <a th:href="@{/file/{postId} (postId = ${post.getPostId()})}" th:text="${post.getAttachment().getFileName()}"></a>
            </td>
            <td>
                <a th:href="@{/deleteAttach/{postId} (postId = ${post.getPostId()})}">
                    <button>Delete Attach</button>
                </a>
            </td>
        </tr>
        <tr>
            <td>Edition</td>
            <!-------------------add condition to display the message------------------->
            <td id="edited" th:if="${post.isEdited() == true} " th:text = "Updated"></td>
        </tr>
        <br/><br/>

        <form action="" th:action="@{/delete}" method="POST" >
            <input type="text" name="postId" th:value="${post.getPostId()}" hidden/>
            <input type="submit" name="delete" value="Delete"/>
        </form>
        <form action="" th:action="@{/edit}" method="POST" >
            <input type="text" name="postId" th:value="${post.getPostId()}" hidden/>
            <input type="submit" name="edit" value="Edit"/>
        </form>
    </table>
</div>
</body>
</html>